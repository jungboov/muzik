<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="likebest">

<!--   베스트 순위 시작 -->
  <select id="list" resultType="LikebestDTO" >
  
  SELECT * from m_chart

   </select>
    <select id="llist" parameterType="int"  resultType="BestDTO">
     	SELECT *
		from m_chart
		<![CDATA[                                                                        
  		where ROWNUM < #{rownum} 
   		]]>   
		order by period DESC, mlike DESC
    </select>
    
<!--     <insert id="create1" parameterType="BestDTO"> -->
<!-- 	INSERT INTO m_best(bestid, title, mlike, period, url, chartid) -->
<!-- 	VALUES((SELECT NVL(MAX(bestid), 0) + 1 FROM m_best),                                   -->
<!-- 	#{title},#{mlike}, #{period}, #{url}, #{chartid})                                      -->
<!-- 	</insert> -->
    <insert id="create" parameterType="Map">
		INSERT INTO m_best(bestid, id_list, period, chartType)
		VALUES((SELECT NVL(MAX(bestid), 0) + 1 FROM m_best),#{id_list},#{period},#{chartType})                                  
	</insert>
	
	<select id="bestList" parameterType="String" resultType="BestDTO">
		select bestid,id_list,period,chartType
		from m_best
<!-- 		국내/해외 차트 나눌 경우  -->
<!-- 		where chartType=#{chartType}     -->
	</select>
<!-- 	금주 추천곡 읽어옴 -->
	<select id="readBest" parameterType="int" resultType="String">
		select id_list
		from m_best
		where bestid=#{bestid}
	</select>
<!-- 	노래정보읽어옴 -->
	<select id="readSong" parameterType="String" resultType="BestDTO">
		select title, artist, thumbnail, url, period, mlike, chartType
		from m_chart
		where chartid=#{chartid}
	</select>

	<select id="readPopSong" parameterType="String" resultType="BestDTO">
		select title, artist, thumbnail, url, period,mlike, chartType 
		from m_popchart
		where popchartid=#{popchartid}
	</select>
	
	
      
</mapper>